(()=>{const{ipcRenderer:e}=window.electron,t=document.getElementById("folderList"),n=document.getElementById("logOutput"),l=document.getElementById("clear-logs-button"),o=document.getElementById("pathInput"),s=document.getElementById("folderSelection"),c=document.getElementById("logView"),d=document.getElementById("start-watch-button"),a=document.getElementById("add-folder-button"),r=document.getElementById("showLogs"),i=document.getElementById("watchStatusButton"),m=document.getElementById("clear-paths-button"),u=document.getElementById("watchIcon");let h=!1,y=!0;function g(){h?(u.classList.remove("fa-eye-slash"),u.classList.add("fa-eye"),i.classList.add("text-green-500"),i.classList.remove("text-gray-500")):(u.classList.remove("fa-eye"),u.classList.add("fa-eye-slash"),i.classList.add("text-gray-500"),i.classList.remove("text-green-500"))}function f(n){const o=[...new Set(n)];t.innerHTML="",o.forEach((n=>{const o=document.createElement("li");o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="space-between",o.textContent=n;const s=document.createElement("i");s.className="fa-solid fa-trash-can ml-4 text-gray-800 p-2 hover:text-red-500 cursor-pointer stop-button",s.style.marginLeft="auto",s.addEventListener("click",(()=>{t.removeChild(o),e.send("stop-watching-folder",n),l.click(),t.children.length>0||(h=!1)})),o.appendChild(s),t.appendChild(o)}))}function p(e,t,l=!1){const o=document.createElement("div");o.textContent=`[${e}] ${t}`,l&&(o.style.color="red"),n.appendChild(o),n.scrollTop=n.scrollHeight,E()}function E(){l.disabled=0===n.children.length}i.addEventListener("click",(()=>{if(h)e.send("stop-watching-all"),h=!1,document.querySelectorAll(".stop-button").forEach((e=>{e.style.display="none"}));else{if(0===t.children.length)return void(y&&e.notify("Folder Watch","No folders available to watch."));d.click(),h=!0,document.querySelectorAll(".stop-button").forEach((e=>{e.style.display="block",e.style.width="30px"}))}g()})),document.getElementById("toggleMenu").addEventListener("click",(()=>{document.querySelector(".w-64").classList.toggle("hidden")})),document.getElementById("showFolders").addEventListener("click",(()=>{s.style.display="block",c.style.display="none"})),r.addEventListener("click",(()=>{s.style.display="none",c.style.display="block"})),a.addEventListener("click",(()=>{const n=o.value.trim();n&&(e.send("check-folder-exists",n),e.once("folder-exists-result",((l,s)=>{if(s&&!Array.from(t.children).some((e=>e.textContent===n))){const l=document.createElement("li");l.textContent=n,t.appendChild(l),o.value="";const s=Array.from(t.children).map((e=>e.textContent));e.send("start-watch",{folders:s}),f(s)}else y&&e.notify("Add Foldeer","Path does not exist or is already in the list.")})))})),document.getElementById("select-folder-button").addEventListener("click",(()=>{e.send("select-folder")})),d.addEventListener("click",(()=>{const n=Array.from(t.children).map((e=>e.firstChild.textContent.trim()));r.click(),e.send("start-watch",{folders:n})})),e.on("toggle-watch-request",(e=>{i.click()})),e.on("view-logs-request",(e=>{r.click()})),e.on("clear-paths-request",(e=>{m.click()})),e.on("set-is-watching",((e,t)=>{h=t,g()})),e.on("notification-toggle",((e,t)=>{y=t})),e.on("restore-saved-config",((e,t)=>{const{folders:n,isWatchingState:l,notifictionState:o}=t;h=l,y=o,g()})),e.on("selected-folders",((e,t)=>{f(t)})),m.addEventListener("click",(()=>{e.send("clear-saved-paths")})),e.on("paths-cleared",(()=>{y&&e.notify("Cleared Folder","Saved paths cleared successfully."),t.innerHTML="",l.click(),h=!1,g()})),e.on("check-folder-list",(n=>{const l=Array.from(t.children).map((e=>e.textContent));e.send("check-folder-list-result",l.length>0)})),e.on("watch-update",((e,t)=>{p("Watch Update",t)})),e.on("watch-error",((e,t)=>{p("Watch Error",t,!0)})),e.on("debug-message",((e,t)=>{p("Debug",t)})),e.on("notify-message",((t,n)=>{const{title:l,message:o}=n;!function(t,n){y&&e.notify(t,n)}(l,o)})),l.addEventListener("click",(()=>{n.innerHTML="",E()})),E()})();